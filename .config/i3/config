# Configuração do i3 ajustada para se assemelhar à sua config do Sway.
#
# Principais mudanças:
# - Atalhos de foco/movimento no estilo vim (h,j,k,l)
# - Bordas removidas para um visual mais limpo
# - Cores de janela focada ajustadas
# - Adicionado modo de redimensionamento (resize)
# - Workspaces expandidos para 10

# Autostart (programas que iniciam com o i3)
exec --no-startup-id gnome-keyring-daemon --start --components=pkcs11,secrets,ssh

exec --no-startup-id ~/.config/polybar/launch.sh
exec --no-startup-id nitrogen --restore
# Mod key (Super/Win)
set $mod Mod4

# Variáveis para terminal e menu (boa prática do seu sway config)
set $term alacritty
set $menu i3-dmenu-desktop

# Fonte
font pango:monospace 10

# Cores da janela focada (do seu sway config)
# client.focused <border> <background> <text> <indicator> <child_border> client.focused

# Remove as bordas das janelas
for_window [class="^.*"] border pixel 0
# --- Atalhos de Tecla (Keybindings) ---

# Iniciar terminal
bindsym $mod+Shift+b exec --no-startup-id ~/.config/polybar/launch.sh
bindsym $mod+Return exec $term

# Matar janela focada
bindsym $mod+Shift+q kill

# Menu de aplicativos (mantendo dmenu_recency como pedido)
bindsym $mod+d exec --no-startup-id $menu

# Mudar foco (estilo vim, como no swaysway)
set $left h
set $down j
set $up k
set $right l
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

# Mover janela focada
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
# Foco usando as setas
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Mover janela usando as setas
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Resize mode usando as setas
mode "resize" {
    bindsym Left  resize shrink width 10 px or 10 ppt
    bindsym Down  resize grow height 10 px or 10 ppt
    bindsym Up    resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# Orientação do split (h para horizontal, v para vertical)
# CORRIGIDO: Movido de 'h' para 'b' para evitar conflito com 'focus left'
bindsym $mod+b split h
bindsym $mod+v split v

# Layouts (como no sway)
bindsym $mod+s layout stacking
# CORRIGIDO: Removidos espaços extras
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Tela cheia (fullscreen)
bindsym $mod+f fullscreen toggle

# Alternar modo flutuante (floating)
bindsym $mod+Shift+space floating toggle

# Focar entre flutuante e normal
bindsym $mod+space focus mode_toggle

# Focar no container pai
bindsym $mod+a focus parent

# --- Workspaces ---
# Definindo de 1 a 10 como no Sway
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# Mudar para o workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# Mover janela focada para o workspace
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# --- Modo de Redimensionamento (Resize Mode) ---
# Ativado com $mod+r, como no sway
mode "resize" {
    # Redimensiona a janela
    bindsym $left  resize shrink width 10 px or 10 ppt
    bindsym $down  resize grow height 10 px or 10 ppt
    bindsym $up    resize shrink height 10 px or 10 ppt
    bindsym $right resize grow width 10 px or 10 ppt

    # Voltar ao modo padrão
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"


# Recarregar a configuração
bindsym $mod+Shift+c reload

# Reiniciar i3 no lugar
bindsym $mod+Shift+r restart

# Sair do i3 (logout)
bindsym $mod+Shift+e exec "i-nagbar -t warning -m 'Você quer sair do i3?' -B 'Sim, sair' 'i3-msg exit'"

# Abrir menu do CopyQ
bindsym $mod+Shift+v exec --no-startup-id copyq menu
bindsym Print exec --no-startup-id maim -s ~/Pictures/Screenshots/$(date +'%Y-%m-%d_%H-%M-%S').png && xclip -selection clipboard -t image/png < ~/Pictures/Screenshots/$(ls -t ~/Pictures/Screenshots | head -n1)
